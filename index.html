<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Happy Birthday Matt (with Cake Drop!)</title>

  <!-- Meta Description & Open Graph for SEO & Social Sharing -->
  <meta name="description" content="A sweet, interactive birthday card for Matt, featuring confetti, floating cakes, balloons, dark mode, and more!" />
  <meta property="og:title" content="Happy Birthday Matt!" />
  <meta property="og:description" content="Click to reveal a heartfelt message, watch confetti, and enjoy floating cakes." />
  <meta property="og:image" content="https://example.com/preview-image.png" />
  <meta property="og:url" content="https://example.com/birthday-matt.html" />

  <!-- Favicon -->
  <link rel="icon" href="favicon.png" type="image/png" />

  <!-- Preload & Load Google Font (Quicksand) Optimally -->
  <link
    rel="preload"
    href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap"
    as="style"
    onload="this.rel='stylesheet'"
  />
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet" />
  </noscript>

  <style>
    /* ──────────────────────────────────────────────────────────────────────────
       BASE STYLES (uses Quicksand throughout)
    ────────────────────────────────────────────────────────────────────────── */
    body {
      font-family: 'Quicksand', sans-serif;
      margin: 0;
      background: linear-gradient(to bottom right, #fff5f8, #ffe4ec);
      background-size: 200% 200%;
      animation: gradientShift 20s ease infinite, fadeIn 1.5s ease-in;
      color: #3a3a3a;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px 20px;
      overflow-x: hidden;
    }
    @keyframes gradientShift {
      0%   { background-position: 0% 50%; }
      50%  { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to   { opacity: 1; }
    }

    h1 {
      font-weight: 600;
      font-size: 3em;
      color: #e75480;
      text-align: center;
      margin-bottom: 0.5em;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
    }

    /* Focus outline for interactive elements */
    [role="button"]:focus,
    button:focus,
    .gallery img:focus,
    #copyLink:focus,
    #themeToggle:focus,
    #toTop:focus {
      outline: 2px dashed #d14f7b;
      outline-offset: 4px;
    }

    .letter {
      max-width: 700px;
      background: #fff0f5;
      border-radius: 20px;
      padding: 25px;
      margin: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      font-size: 1.1em;
      line-height: 1.7;
      color: #6c3a4c;
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin: 30px 0;
      max-width: 1000px;
      width: 100%;
      animation: slideUp 1s ease-out;
    }
    @keyframes slideUp {
      from { transform: translateY(40px); opacity: 0; }
      to   { transform: translateY(0); opacity: 1; }
    }

    .gallery img {
      width: 100%;
      border-radius: 18px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
      transition: transform 0.3s, box-shadow 0.3s;
      object-fit: cover;
      height: 340px;
      background: #e8e8e8;
      cursor: pointer;
    }
    .gallery img:hover,
    .gallery img:focus {
      transform: scale(1.05);
      box-shadow: 0 12px 20px rgba(0, 0, 0, 0.2);
    }
    .gallery figcaption {
      text-align: center;
      margin-top: 8px;
      font-size: 0.95em;
      color: #3a3a3a;
    }

    .music-container {
      display: flex;
      justify-content: center;
      margin-top: 30px;
      width: 100%;
      max-width: 600px;
    }
    .music {
      text-align: center;
      animation: fadeIn 2s ease-in;
      background: #ffffffaa;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 6px 14px rgba(0,0,0,0.1);
      width: 100%;
    }
    .music h2 {
      font-weight: 600;
      font-size: 1.8em;
      margin-bottom: 10px;
      color: #d14f7b;
    }
    .music p {
      font-size: 1em;
      margin-bottom: 20px;
      color: #7a4c61;
    }
    audio {
      margin: 10px 0;
      width: 100%;
    }

    .gif {
      margin: 40px 0 10px;
      text-align: center;
    }
    .gif img {
      width: 220px;
      border-radius: 12px;
    }

    /* ──────────────────────────────────────────────────────────────────────────
       PAGE CONTENT BLUR (when the card is open)
    ────────────────────────────────────────────────────────────────────────── */
    #pageContent.blur {
      filter: blur(4px);
      transition: filter 0.3s ease;
    }

    /* ──────────────────────────────────────────────────────────────────────────
       FLOATING CAKES (new implementation, replaces “.heart”)
    ────────────────────────────────────────────────────────────────────────── */
    @keyframes drop-cake {
      to {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
    }
    .cake {
      position: absolute;
      width: 40px;   /* adjust size of cake icon */
      height: 40px;
      background: url('cake.png') no-repeat center/contain;
      opacity: 0.9;
      animation-name: drop-cake;
      animation-timing-function: linear;
      /* animation-duration will be set dynamically in JS */
    }

    /* ──────────────────────────────────────────────────────────────────────────
       VALENTINE’S‐DAY CARD STYLES (click‐only version with ARIA & focus)
    ────────────────────────────────────────────────────────────────────────── */
    .valentines-day-card {
      position: relative;
      z-index: 10; /* stay on top when #pageContent is blurred */
      width: 400px;
      height: 300px;
      background: linear-gradient(
        135deg,
        #ff8fa3 0%,
        #ffc1cb 50%,
        #ffe4eb 100%
      );
      overflow: hidden;
      border: 10px solid white;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      margin: 0 auto;
      transition: box-shadow 0.3s ease, transform 0.3s ease;
      cursor: pointer;
      animation: popIn 0.8s ease-out;
    }
    .valentines-day-card:focus {
      outline: none;
      box-shadow: 0 0 0 4px rgba(209, 79, 123, 0.6);
    }
    .valentines-day-card.active {
      width: 800px;
      height: 600px;
    }
    .valentines-day-card.active .clouds {
      display: none;
    }
    .valentines-day-card:before {
      content: "";
      position: absolute;
      background-color: #ffb3c1;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      top: 140px;
      left: -25px;
      box-shadow:
        60px 20px #ffb3c1,
        130px 10px #ffb3c1,
        190px 20px #ffb3c1,
        260px -5px #ffb3c1,
        340px 20px #ffb3c1;
    }
    .valentines-day-card:after {
      content: "";
      position: absolute;
      background-color: #ffccd5;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      top: 160px;
      left: -40px;
      box-shadow:
        50px 20px #ffccd5,
        120px 40px #ffccd5,
        200px 15px #ffccd5,
        260px 30px #ffccd5,
        330px 30px #ffccd5,
        380px 10px #ffccd5;
    }
    .clouds {
      position: absolute;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background-color: #fff0f3;
      z-index: 5;
      top: 210px;
      left: -20px;
      box-shadow:
        55px 30px #fff0f3,
        125px 10px #fff0f3,
        175px 20px #fff0f3,
        250px 10px #fff0f3,
        320px 5px #fff0f3,
        380px 10px #fff0f3;
    }
    .hearts {
      position: absolute;
      z-index: 2;
    }
    .heartOne { position: absolute; left:100px; top:250px; animation: up 4s linear forwards 1s; }
    .heartTwo { position: absolute; left:270px; top:230px; animation: up 5s linear forwards 1.8s; }
    .heartThree { position: absolute; left:85px; top:415px; animation: up 5s linear forwards 3s; }
    .heartFour { position: absolute; left:320px; top:380px; animation: upTwo 9s linear infinite 3.5s; }
    .heartFive { position: absolute; left:150px; top:400px; animation: upTwo 13s linear infinite 4.5s; }
    .right-side:before, .right-side:after {
      position: absolute;
      content: "";
      transform-origin: left;
      animation: move 1s ease infinite;
    }
    .right-side:before {
      border-radius: 50% 50% 50% 0;
      width: 21px;
      height: 20px;
      background-color: #c9184a;
      left: -0.26px;
    }
    .right-side:after {
      height: 0;
      width: 0;
      border-bottom: 10px solid transparent;
      border-left: 15px solid #c9184a;
      top: 19px;
      left: -0.26px;
    }
    .left-side:before, .left-side:after {
      position: absolute;
      content: "";
      transform-origin: right;
      animation: move 1s ease infinite;
    }
    .left-side:before {
      border-radius: 50% 50% 0 50%;
      width: 20px;
      height: 20px;
      left: -20.7px;
      background-color: #ff4d6d;
    }
    .left-side:after {
      height: 0;
      width: 0;
      left: -15px;
      border-bottom: 10px solid transparent;
      border-right: 15px solid #ff4d6d;
      top: 19px;
    }
    @keyframes move {
      0%, 100% { transform: rotateY(0); }
      50% { transform: rotateY(-45deg); }
    }
    @keyframes up {
      0% { transform: translateY(0); }
      100% { transform: translateY(-200px); }
    }
    @keyframes upTwo {
      0% { transform: translateY(0); }
      100% { transform: translateY(-450px); }
    }

    /* ──────────────────────────────────────────────────────────────────────────
       POP‐IN ANIMATION FOR CARD ON LOAD
    ────────────────────────────────────────────────────────────────────────── */
    @keyframes popIn {
      0%   { transform: scale(0.8); opacity: 0; }
      60%  { transform: scale(1.05); opacity: 1; }
      100% { transform: scale(1); }
    }

    /* ──────────────────────────────────────────────────────────────────────────
       SLIDE‐IN ANIMATION FOR HIDDEN TEXT
    ────────────────────────────────────────────────────────────────────────── */
    @keyframes slideInUp {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .text {
      position: absolute;
      color: #800f2f;
      font-size: 30px;
      line-height: 1;
      text-align: center;
      width: 94%;
      left: 0;
      padding: 20px;
      z-index: 3;
      top: 320px;
      animation: up 1s ease forwards;
      transition: 0.2s;
    }
    .hover {
      color: white;
      text-align: center;
      margin-top: 10px;
    }
          
      <div class="countdown-container">
        <div class="countdown-box">
          <div class="countdown-value" id="hours">12</div>
          <div class="countdown-label">Hours</div>
        </div>
        <div class="countdown-box">
          <div class="countdown-value" id="minutes">45</div>
          <div class="countdown-label">Minutes</div>
        </div>
        <div class="countdown-box">
          <div class="countdown-value" id="seconds">30</div>
          <div class="countdown-label">Seconds</div>
        </div>
      </div>
      
      <button class="confetti-btn" id="confettiBtn">
        <i class="fas fa-birthday-cake"></i> Surprise Matt with Confetti!
      </button>
    /* ──────────────────────────────────────────────────────────────────────────
       REFINED HIDDEN TEXT (on .active), WITH SLIDE‐IN
    ────────────────────────────────────────────────────────────────────────── */
    .valentines-day-card.active .text::before {
      content: "My dearest Matt,\A\A\
Happy birthday to the most wonderful person in my life. You make my world brighter with your laughter, your kindness, and the music that flows from your soul. I’m endlessly grateful for every moment we share that says more than words.\A\A\
You are the calm to my chaos, the melody to my lyrics, and the best part of every day. I hope this little website reminds you how much you're loved and cherished. Here's to more memories, more songs, more kisses, and a life as beautiful as your heart.\A\A\
Love forever,\A Nook ♡";
      white-space: pre-wrap;
      display: block;
      font-family: 'Quicksand', sans-serif;
      font-weight: 400;
      font-size: 20px;
      line-height: 1.5;
      background: #fff0f5;
      padding: 25px;
      border-radius: 12px;
      color: #6c3a4c;
      margin-top: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      animation: slideInUp 0.6s ease-out forwards;
      text-align: center;
    }
    .valentines-day-card.active .text span {
      display: none;
    }

    /* ──────────────────────────────────────────────────────────────────────────
       RESPONSIVE ADJUSTMENTS FOR CARD ON MOBILE SCREENS
    ────────────────────────────────────────────────────────────────────────── */
    @media (max-width: 768px) {
      h1 {
        font-size: 2.2em;
        padding: 0 10px;
      }
      .letter {
        padding: 20px;
        font-size: 1em;
        margin: 15px 10px;
      }
      .gallery {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
      }
      .gallery img {
        height: auto;
        max-height: 200px;
      }
      .music-container {
        margin-top: 30px;
      }
      .music h2 {
        font-size: 1.5em;
      }
      .gif img {
        width: 160px;
      }
      audio {
        width: 100%;
      }

      .valentines-day-card,
      .valentines-day-card.active {
        width: 95vw;
        height: auto;
      }
      .valentines-day-card:before,
      .valentines-day-card:after {
        top: 120px;
        left: -20px;
        box-shadow:
          45px 15px #ffb3c1,
          100px 8px #ffb3c1,
          150px 15px #ffb3c1,
          200px -4px #ffb3c1,
          260px 15px #ffb3c1;
      }
      .clouds {
        top: 180px;
        left: -15px;
        box-shadow:
          45px 20px #fff0f3,
          100px 8px #fff0f3,
          150px 15px #fff0f3,
          200px 8px #fff0f3,
          260px 4px #fff0f3;
      }
      .valentines-day-card .text {
        position: relative;
        top: auto;
        animation: none;
      }
      .valentines-day-card.active .text::before {
        position: relative;
        top: auto;
        display: block;
      }
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 1.8em;
      }
      .letter {
        font-size: 0.95em;
      }
      .music h2 {
        font-size: 1.3em;
      }
      .gallery img {
        max-height: 150px;
      }

      .valentines-day-card,
      .valentines-day-card.active {
        width: 98vw;
        height: auto;
      }
      .valentines-day-card .text,
      .valentines-day-card.active .text::before {
        font-size: 18px;
      }
      .valentines-day-card.active .text::before {
        padding: 18px;
      }
    }

    /* ──────────────────────────────────────────────────────────────────────────
       IMAGE MODAL (Lightbox) STYLES
    ────────────────────────────────────────────────────────────────────────── */
    .image-modal {
      display: none;             /* hidden by default */
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .image-modal img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    }
    .image-modal .close-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      color: #fff;
      font-size: 30px;
      font-weight: bold;
      cursor: pointer;
      user-select: none;
    }

    /* ──────────────────────────────────────────────────────────────────────────
       4. BALLOON CURSOR / INTERACTIVE BALLOONS
    ────────────────────────────────────────────────────────────────────────── */
    .balloon {
      position: absolute;
      width: 30px;
      height: 40px;
      background: url('https://i.imgur.com/5RBlY7D.png') no-repeat center/contain;
      pointer-events: none;
      animation: floatUp 2s ease-out forwards;
    }
    @keyframes floatUp {
      0%   { transform: translateY(0) scale(0.6); opacity: 1; }
      100% { transform: translateY(-120px) scale(0.4); opacity: 0; }
    }

    /* ──────────────────────────────────────────────────────────────────────────
       5. HAPPY BIRTHDAY MARQUEE / ANIMATED TEXT BANNER
    ────────────────────────────────────────────────────────────────────────── */
    .marquee-container {
      overflow: hidden;
      white-space: nowrap;
      width: 100%;
      background: #ffb3c1;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .marquee {
      display: inline-block;
      padding-left: 100%;
      animation: scrollText 12s linear infinite;
      font-family: 'Quicksand', sans-serif;
      font-weight: 600;
      font-size: 1.4em;
      color: #800f2f;
    }
    @keyframes scrollText {
      0%   { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    /* ──────────────────────────────────────────────────────────────────────────
       8. THEME SWITCHER (DAY/NIGHT OR COLOR PALETTE)
    ────────────────────────────────────────────────────────────────────────── */
    body.dark-mode {
      background: #2c003e; /* deep plum */
      color: #f0e6f6;
    }
    body.dark-mode h1 {
      color: #ffd1ff;
    }
    body.dark-mode .valentines-day-card {
      background: linear-gradient(
        135deg,
        #5e0068 0%,
        #800f9e 50%,
        #b030e7 100%
      );
      border-color: #f0e6f6;
    }
    body.dark-mode .valentines-day-card .text::before {
      background: #3e0030; /* dark plum behind the message */
      color: #f0e6f6;      /* near-white text */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    body.dark-mode .text {
      color: #ffd1ff;
    }
    body.dark-mode .music {
      background: rgba(50, 0, 50, 0.7);
      color: #f0e6f6;
    }
    body.dark-mode .music h2 {
      color: #ffd1ff;
    }
    body.dark-mode .music p {
      color: #e0c0e6;
    }
    body.dark-mode .gallery img {
      filter: brightness(0.8);
    }
    body.dark-mode figcaption {
      color: #f0e6f6;
    }
    body.dark-mode .marquee-container {
      background: #4b004b;
    }
    body.dark-mode .marquee {
      color: #ffd1ff;
    }
    #themeToggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 8px 12px;
      background: #ffe4ec;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-family: 'Quicksand', sans-serif;
      font-weight: 600;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    body.dark-mode #themeToggle {
      background: #5e0068;
      color: #f0e6f6;
    }


    /* ──────────────────────────────────────────────────────────────────────────
       RETURN TO TOP BUTTON STYLES
    ────────────────────────────────────────────────────────────────────────── */
    #toTop {
      position: fixed;
      bottom: 80px;
      right: 20px;
      padding: 10px 14px;
      background: #ff6fa5;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-family: 'Quicksand', sans-serif;
      font-weight: 600;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      display: none;       /* hidden until scroll */
      z-index: 1000;       /* ensure it sits on top */
      transition: background 0.2s;
    }
    #toTop:hover,
    #toTop:focus {
      background: #e75480;
    }
  </style>
</head>
<body>
  <!-- ──────────────────────────────────────────────────────────────────────────
       VALENTINE’S‐DAY CARD (with ARIA & tabindex)
  ────────────────────────────────────────────────────────────────────────── -->
